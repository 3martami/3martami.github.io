<html lang="es">
<head>
	<title>Visor TFM Marta</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Marta Miralles Mora"/>
	<meta name="description" content="Visor web de serveis per SPEIS, comarca de La Segarra">
	<meta name="robots" content="index,follow">  <!--Això no sé que vol dir -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
	<link rel="stylesheet" href="css/L.Control.MousePosition.css" />

	<style>
		body {
			margin: 0;
			padding: 0;
			overflow: hidden;
		}
		#map {
			height: 100%;
			width: 100%;
			background-color: #ffffff
		}


		#contenedor{position: absolute;
					width: 100px;
					height: 100px;
					left: 50px;
					top: 10px;
					border: 2px solid grey;
					z-index: 1;
					border-radius: 30px;
					background-color: white;
					opacity: 0.8;}












	</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>
<script src="js/leaflet.ajax.min.js"></script>	<!-- Ordre per poder carregar capes Geojson -->
<script src="js/L.Control.MousePosition.js"></script>





<script>


;
var Orto_icgc;
var topo_icgc;
var Municipis;
var Parcs;
var CapaHidrants;
var CapaPuntsAigua;
var CapaVulnerables;
var CapaPistes;
var CapaCarreteres;
var controlCapas





function init(){


var map = L.map('map', {center: [41.746492, 1.309450],zoom: 10});


	Orto_icgc =  L.tileLayer('https://geoserveis.icgc.cat/icc_mapesmultibase/noutm/wmts/orto/GRID3857/{z}/{x}/{y}.jpeg'				,{continuousWorld: true,
                 attribution: 'Institut Cartogràfic i Geològic de Catalunya -ICGC',
                 });
				  

	topo_icgc = L.tileLayer('https://geoserveis.icgc.cat/icc_mapesmultibase/noutm/wmts/topo/GRID3857/{z}/{x}/{y}.jpeg', 			{maxZoom: 19,
					minZoom: 1,
 				});topo_icgc.addTo(map);

 				
						 



	Municipis = L.geoJson.ajax('datos/Municipis_Segarraok.geojson', {
				style: function (feature) {
				return {color:'#000000',weight:0.5,fillColor: "#ff7800", fillOpacity: 0.4,opacity: 1,};
				},
				onEachFeature: function(feature, layer) {
		 		popupContent ="<b>"+feature.properties.MUNICIPI+"</b>";
		 		layer.bindPopup(popupContent);
		 		}
				}).addTo(map);



	Parcs=L.geoJson.ajax('datos/parcs_bombersOK.geojson', {
				pointToLayer: function (feature, latlng) {
				return L.marker(latlng, {
				icon: icona_parc
				});},
				onEachFeature: function(feature, layer) {
				popupContent ="<b>"+feature.properties.NOM+"</b>";
				layer.bindPopup(popupContent);
		 		}});
				
			var icona_parc=L.icon({
				iconUrl: 'images/iconaParc.png',
				iconSize:     [16, 16], // Mida
				iconAnchor:   [8, 8], // Punt localització
				});
				
				
				
	CapaHidrants=L.geoJson.ajax('datos/Hidrants_OK.geojson', { 
				pointToLayer: function (feature, latlng) {
							return L.circleMarker(latlng, {
							radius: 1,
							color: "#06BAFF",
							opacity: 1,
							fillOpacity: 1,
							});},});
			
			
			
	CapaPuntsAigua=L.geoJson.ajax('datos/Punts_aigua_OK.geojson', {
				pointToLayer: function (feature, latlng) {
				return L.marker(latlng, {
				icon: icona_puntaigua
				});},});
		
			var icona_puntaigua=L.icon({
	 		    iconUrl: 'images/IconaPuntAigua.png',
				iconSize: [13, 13],
				iconAnchor: [8, 8],
				});

	CapaVulnerables=L.geoJson.ajax('datos/Punts_Vulnerables_OK.geojson', { 
				pointToLayer: function (feature, latlng) {
							return L.circleMarker(latlng, {
							radius: 1.5,
							color: "#00D300",
							opacity: 1,
							fillOpacity: 1,
							});},
				onEachFeature: function  (feature, layer) {
				popupContent ="<b>"+feature.properties.US+"</b>";
		 		layer.bindPopup(popupContent);}
				});
	
	
	
	CapaPistes = L.geoJson.ajax('datos/Pistes_2D_OK.geojson', {
				style: function (feature) {
				return {color:'#000000',weight: 2,opacity: 1,};
				},});
				

	CapaCarreteres = L.geoJson.ajax('datos/Carreteres_2D.geojson', {
				style: function (feature) {
				return {color:'#000000',weight: 2,opacity: 1,};
				},});

				


var baseMaps = {"Topogràfic": topo_icgc,"Ortofoto":Orto_icgc};

var overlayMaps = {
			"Límits municipals": Municipis,
			"Parcs de bombers": Parcs,
			"Hidrants" : CapaHidrants,
			"Punts d'aigua" : CapaPuntsAigua,
			"Punts vulnerables" : CapaVulnerables,
			"Pistes secundàries (3 a 5 m)" : CapaPistes,
			"Carreteres" : CapaCarreteres			
			};



	
	
		controlCapas=L.control.layers(baseMaps, overlayMaps,{collapsed:false, position: 'topleft'});
		controlCapas.addTo(map);
		L.control.mousePosition().addTo(map);
		}



 function Vista(){
		map.setView([41.746492, 1.309450],11);
 }







</script>
</head>
<body onLoad="init()">
	<div id="map"></div>

	<div id="contenedor">
	<a href="#" onClick="Vista()">Vista general</a>
	</div>



</body>
</html>
